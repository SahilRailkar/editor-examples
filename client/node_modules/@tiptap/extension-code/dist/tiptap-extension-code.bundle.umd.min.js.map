{"version":3,"file":"tiptap-extension-code.bundle.umd.min.js","sources":["../src/code.ts"],"sourcesContent":["import {\n  Command,\n  Mark,\n  markInputRule,\n  markPasteRule,\n  mergeAttributes,\n} from '@tiptap/core'\n\nexport interface CodeOptions {\n  HTMLAttributes: Record<string, any>,\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands {\n    code: {\n      /**\n       * Set a code mark\n       */\n      setCode: () => Command,\n      /**\n       * Toggle inline code\n       */\n      toggleCode: () => Command,\n      /**\n       * Unset a code mark\n       */\n      unsetCode: () => Command,\n    }\n  }\n}\n\nexport const inputRegex = /(?:^|\\s)((?:`)((?:[^`]+))(?:`))$/gm\nexport const pasteRegex = /(?:^|\\s)((?:`)((?:[^`]+))(?:`))/gm\n\nexport const Code = Mark.create<CodeOptions>({\n  name: 'code',\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  excludes: '_',\n\n  parseHTML() {\n    return [\n      { tag: 'code' },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['code', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  addCommands() {\n    return {\n      setCode: () => ({ commands }) => {\n        return commands.setMark('code')\n      },\n      toggleCode: () => ({ commands }) => {\n        return commands.toggleMark('code')\n      },\n      unsetCode: () => ({ commands }) => {\n        return commands.unsetMark('code')\n      },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-e': () => this.editor.commands.toggleCode(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      markInputRule(inputRegex, this.type),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule(inputRegex, this.type),\n    ]\n  },\n})\n"],"names":["inputRegex","Code","Mark","create","name","defaultOptions","HTMLAttributes","excludes","parseHTML","tag","[object Object]","mergeAttributes","this","options","addCommands","setCode","commands","setMark","toggleCode","toggleMark","unsetCode","unsetMark","Mod-e","editor","markInputRule","type","markPasteRule"],"mappings":"kUA+BaA,EAAa,qCAGbC,EAAOC,OAAKC,OAAoB,CAC3CC,KAAM,OAENC,eAAgB,CACdC,eAAgB,IAGlBC,SAAU,IAEVC,UAAS,IACA,CACL,CAAEC,IAAK,SAIXC,YAAWJ,eAAEA,IACX,MAAO,CAAC,OAAQK,kBAAgBC,KAAKC,QAAQP,eAAgBA,GAAiB,IAGhFQ,YAAW,KACF,CACLC,QAAS,IAAM,EAAGC,SAAAA,KACTA,EAASC,QAAQ,QAE1BC,WAAY,IAAM,EAAGF,SAAAA,KACZA,EAASG,WAAW,QAE7BC,UAAW,IAAM,EAAGJ,SAAAA,KACXA,EAASK,UAAU,UAKhCX,uBACE,MAAO,CACLY,QAAS,IAAMV,KAAKW,OAAOP,SAASE,eAIxCR,gBACE,MAAO,CACLc,gBAAcxB,EAAYY,KAAKa,QAInCf,gBACE,MAAO,CACLgB,gBAAc1B,EAAYY,KAAKa,2DAjDX"}
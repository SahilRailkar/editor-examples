{"version":3,"file":"tiptap-extension-horizontal-rule.esm.js","sources":["../src/horizontal-rule.ts"],"sourcesContent":["import {\n  Command,\n  Node,\n  nodeInputRule,\n  mergeAttributes,\n} from '@tiptap/core'\nimport { TextSelection } from 'prosemirror-state'\n\nexport interface HorizontalRuleOptions {\n  HTMLAttributes: Record<string, any>,\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands {\n    horizontalRule: {\n      /**\n       * Add a horizontal rule\n       */\n      setHorizontalRule: () => Command,\n    }\n  }\n}\n\nexport const HorizontalRule = Node.create<HorizontalRuleOptions>({\n  name: 'horizontalRule',\n\n  defaultOptions: {\n    HTMLAttributes: {},\n  },\n\n  group: 'block',\n\n  parseHTML() {\n    return [\n      { tag: 'hr' },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['hr', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  addCommands() {\n    return {\n      setHorizontalRule: () => ({ tr, dispatch }) => {\n        if (dispatch) {\n          tr.replaceSelectionWith(this.type.create())\n\n          const { parent, pos } = tr.selection.$from\n          const posAfter = pos + 1\n          const nodeAfter = tr.doc.nodeAt(posAfter)\n\n          // end of document\n          if (!nodeAfter) {\n            const node = parent.type.contentMatch.defaultType?.create()\n\n            if (node) {\n              tr.insert(posAfter, node)\n              tr.setSelection(TextSelection.create(tr.doc, posAfter))\n            }\n          }\n\n          tr.scrollIntoView()\n        }\n\n        return true\n      },\n    }\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule(/^(?:---|___\\s|\\*\\*\\*\\s)$/, this.type),\n    ]\n  },\n})\n"],"names":[],"mappings":";;;MAuBa,cAAc,GAAG,IAAI,CAAC,MAAM,CAAwB;IAC/D,IAAI,EAAE,gBAAgB;IAEtB,cAAc,EAAE;QACd,cAAc,EAAE,EAAE;KACnB;IAED,KAAK,EAAE,OAAO;IAEd,SAAS;QACP,OAAO;YACL,EAAE,GAAG,EAAE,IAAI,EAAE;SACd,CAAA;KACF;IAED,UAAU,CAAC,EAAE,cAAc,EAAE;QAC3B,OAAO,CAAC,IAAI,EAAE,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC,CAAA;KAC5E;IAED,WAAW;QACT,OAAO;YACL,iBAAiB,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE;;gBACxC,IAAI,QAAQ,EAAE;oBACZ,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAA;oBAE3C,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,KAAK,CAAA;oBAC1C,MAAM,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAA;oBACxB,MAAM,SAAS,GAAG,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;;oBAGzC,IAAI,CAAC,SAAS,EAAE;wBACd,MAAM,IAAI,GAAG,MAAA,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,0CAAE,MAAM,EAAE,CAAA;wBAE3D,IAAI,IAAI,EAAE;4BACR,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;4BACzB,EAAE,CAAC,YAAY,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAA;yBACxD;qBACF;oBAED,EAAE,CAAC,cAAc,EAAE,CAAA;iBACpB;gBAED,OAAO,IAAI,CAAA;aACZ;SACF,CAAA;KACF;IAED,aAAa;QACX,OAAO;YACL,aAAa,CAAC,0BAA0B,EAAE,IAAI,CAAC,IAAI,CAAC;SACrD,CAAA;KACF;CACF;;;;;"}